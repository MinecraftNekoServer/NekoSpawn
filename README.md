# NekoSpawn Plugin

这是一个简单的Minecraft服务器插件，用于设置和管理玩家出生点，强制阻止所有生物生成，并在玩家Y坐标过低时传送回出生点。

## 功能

- 使用 `/spawn set` 命令设置出生点（需要 `nekospawn.setspawn` 权限）
- 玩家加入服务器时自动传送到出生点（包含朝向）
- 自动移除所有生成的生物实体（每30秒执行一次）
- 强制阻止所有生物生成（无需指令控制）
- 当玩家Y坐标小于等于0时自动传送回出生点（包含朝向）
- 玩家加入时自动获得二次元猫娘主题菜单时钟，右键点击可打开传送菜单
- 菜单物品不可丢弃和移动
- 点击菜单按钮可连接到其他后端服务器
- 使用插件通道实现跨服传送，不依赖/server指令
- 支持BungeeCord和Velocity代理服务器
- 建筑权限系统：没有`nekospawn.build`权限的玩家无法与世界交互
- 美化系统：简洁美观的二次元猫娘主题GUI菜单
- 天气锁定系统：服务器始终为晴天无雨
- 消息过滤系统：移除玩家加入/离开服务器的消息
- 位置信息保存在 config.yml 中

## 安装

1. 将编译后的插件JAR文件放入服务器的 `plugins` 文件夹
2. 重启服务器

## 配置文件

插件会在第一次运行时自动生成config.yml配置文件，包含以下设置：

### 出生点设置
- `spawn.world` - 出生点所在世界名称
- `spawn.x, spawn.y, spawn.z` - 出生点坐标
- `spawn.yaw, spawn.pitch` - 出生点朝向

### Lobby服务器设置
- `lobby-server.name` - Lobby服务器名称（需要在代理服务器中配置）

## 使用方法

### 设置出生点
1. 玩家需要拥有 `nekospawn.setspawn` 权限才能设置出生点
2. 站在想要设置为出生点的位置
3. 执行命令 `/spawn set`
4. 所有玩家加入服务器时都会被传送到这个位置（包含朝向）

### 自动移除生物
- 插件会自动每30秒移除一次所有世界中的生物实体（不包括玩家）
- 无需任何指令或操作，自动运行

### 强制阻止生物生成
- 插件会自动阻止所有生物生成，无需任何指令控制
- 所有生物（包括怪物、动物、掉落物等）都不会自然生成

### Y坐标检测
- 当玩家Y坐标小于等于0时，会自动传送回出生点（包含朝向）
- 传送时不会显示任何消息
- 无需任何指令或操作，自动运行

### 菜单传送系统
- 玩家加入服务器时会自动获得一个二次元猫娘主题时钟物品
- 时钟物品不可丢弃和移动
- 右键点击时钟可打开3行二次元猫娘主题菜单GUI
- 点击"进入梦幻世界"按钮可连接到其他后端服务器（可在配置文件中设置服务器名称）
- 使用插件通道实现跨服传送，不依赖/server指令
- 支持BungeeCord和Velocity代理服务器

### 建筑权限系统
- 没有`nekospawn.build`权限的玩家无法：
  - 破坏方块
  - 放置方块
  - 与方块交互（如打开箱子、拉杆等）
  - 踩踏农田（包括其他玩家的农田）
- 默认只有OP玩家拥有此权限

### 美化系统
- 玩家物品栏只保留菜单时钟，保持简洁
- 菜单GUI采用简洁美观的二次元猫娘主题设计：
  - 中心位置："进入梦幻世界"按钮（钻石材质）
  - 四角装饰：小鱼干、猫薄荷、玩具球、小猫窝
  - 按钮周围：闪闪发光的星星碎片装饰
- 所有装饰物品均为不可丢弃和不可移动
- 代码结构清晰，易于维护和扩展

### 天气锁定系统
- 服务器启动后自动锁定所有世界天气为晴天无雨
- 每60秒检查并重置天气状态，确保不会下雨
- 无需任何指令操作，自动运行

### 消息过滤系统
- 自动移除玩家加入服务器时的欢迎消息
- 自动移除玩家离开服务器时的告别消息
- 保持服务器聊天界面的简洁
- 无需任何指令操作，自动运行

## 故障排除

### 服务器连接问题
如果点击"进入梦幻世界"按钮后无法连接到目标服务器，请检查：
1. 确保代理服务器（Velocity/BungeeCord）已正确配置目标服务器
2. 确保配置文件中的服务器名称与代理服务器配置一致
3. 检查服务器日志中是否有相关错误信息
4. 确保代理服务器已正确配置插件通道支持

### 物品兼容性问题
- 插件已针对Minecraft 1.12版本优化，使用WATCH材质代替CLOCK
- 如果在其他版本中遇到物品显示问题，请检查对应版本的Material常量

## 权限

- `nekospawn.setspawn` - 允许设置出生点（默认为OP）
- `nekospawn.build` - 允许建筑和与方块交互（默认为OP）